<header
  class="flex h-[10vh] justify-between px-10 md:justify-around items-center w-screen bg-black shadow-xl fixed z-110 text-white opacity-0 translate-y-4 transition-all duration-700 will-change-transform fade-in-section"
>
  <h1 class="font-bold text-3xl"><a href="/">K’i’ik</a></h1>

  <nav class="gap-10 hidden md:flex">
    <a href="/#about" class="hover:text-yellow-600">About</a>
    <a href="/menu" class="hover:text-yellow-600">Menu</a>
    <a href="/#ubicacion" class="hover:text-yellow-600">Location</a>
  </nav>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-btn"
    class="text-3xl font-bold md:hidden transition-transform duration-300"
  >
    ☰
  </button>

  <!-- Mobile Menu -->
  <nav
    id="mobile-menu"
    class="absolute top-20 left-0 w-full bg-black shadow-lg z-100 overflow-hidden max-h-0 transition-all duration-500"
  >
    <div class="flex flex-col">
      <a
        href="/#about"
        class="px-10 py-3 hover:bg-white hover:text-black cursor-pointer border-b border-white/40 text-center"
        >About</a
      >
      <a
        href="/menu"
        class="px-10 py-3 hover:bg-white hover:text-black cursor-pointer border-b border-white/40 text-center"
        >Menu</a
      >
      <a
        href="/#ubicacion"
        class="px-10 py-3 hover:bg-white hover:text-black cursor-pointer border-b border-white/40 text-center"
        >Location</a
      >
    </div>
  </nav>
</header>

<script>
  const mobileMenuBtn = document.getElementById(
    "mobile-menu-btn"
  ) as HTMLButtonElement | null;
  const mobileMenu = document.getElementById(
    "mobile-menu"
  ) as HTMLElement | null;

  if (mobileMenuBtn && mobileMenu) {
    let menuOpen = false;

    mobileMenuBtn.addEventListener("click", () => {
      menuOpen = !menuOpen;
      if (menuOpen) {
        mobileMenu.style.maxHeight = `${mobileMenu.scrollHeight}px`; // smooth open
        mobileMenuBtn.textContent = "✕"; // change to X
      } else {
        mobileMenu.style.maxHeight = "0"; // smooth close
        mobileMenuBtn.textContent = "☰"; // back to hamburger
      }
    });

    // Close menu when clicking outside
    document.addEventListener("click", (e: MouseEvent) => {
      const target = e.target as Node;
      if (
        !mobileMenuBtn.contains(target) &&
        !mobileMenu.contains(target) &&
        menuOpen
      ) {
        menuOpen = false;
        mobileMenu.style.maxHeight = "0";
        mobileMenuBtn.textContent = "☰";
      }
    });

    // Close menu when clicking any link inside mobile menu
    mobileMenu.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => {
        menuOpen = false;
        mobileMenu.style.maxHeight = "0";
        mobileMenuBtn.textContent = "☰";
      });
    });
  }
</script>
